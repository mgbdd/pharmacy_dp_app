2025-05-25 12:39:49.603 UTC [1] LOG:  00000: starting PostgreSQL 17.5 (Debian 17.5-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
2025-05-25 12:39:49.603 UTC [1] LOCATION:  PostmasterMain, postmaster.c:1080
2025-05-25 12:39:49.603 UTC [1] LOG:  00000: listening on IPv4 address "0.0.0.0", port 5432
2025-05-25 12:39:49.603 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:661
2025-05-25 12:39:49.603 UTC [1] LOG:  00000: listening on IPv6 address "::", port 5432
2025-05-25 12:39:49.603 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:661
2025-05-25 12:39:49.606 UTC [1] LOG:  00000: listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2025-05-25 12:39:49.606 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:657
2025-05-25 12:39:49.610 UTC [29] LOG:  00000: database system was shut down at 2025-05-25 12:39:24 UTC
2025-05-25 12:39:49.610 UTC [29] LOCATION:  StartupXLOG, xlog.c:5445
2025-05-25 12:39:49.619 UTC [1] LOG:  00000: database system is ready to accept connections
2025-05-25 12:39:49.619 UTC [1] LOCATION:  process_pm_child_exit, postmaster.c:2484
2025-05-25 12:39:57.774 UTC [41] ERROR:  42703: column p.ammount does not exist at character 580
2025-05-25 12:39:57.774 UTC [41] HINT:  Perhaps you meant to reference the column "p.amount".
2025-05-25 12:39:57.774 UTC [41] QUERY:  UPDATE medicine_order mo
	    SET status = CASE 
	        WHEN m.type = 'finished' THEN 'ready'::order_status
	        ELSE 'producing'::order_status
	    END,
	    production_start_time = CASE
	        WHEN m.type = 'manufactured' THEN CURRENT_TIMESTAMP
	        ELSE NULL
	    END
	    FROM prescription p
	    JOIN medicine m ON p.medicine_id = m.id
	    WHERE mo.prescription_id = p.id
	    AND mo.status = 'waiting for a delivery'::order_status
	    AND (
	        (m.type = 'finished' AND m.id = NEW.medication_id AND 
	         (SELECT current_amount FROM medication WHERE id = m.id) >= p.ammount)
	        OR
	        (m.type = 'manufactured' AND EXISTS (
	            SELECT 1 FROM composition c 
	            WHERE c.medicine_id = m.id AND c.ingredient_id = NEW.medication_id
	        ) AND check_components(p.medicine_id, p.ammount))
	    )
2025-05-25 12:39:57.774 UTC [41] CONTEXT:  PL/pgSQL function process_delivery_update() line 9 at SQL statement
2025-05-25 12:39:57.774 UTC [41] LOCATION:  errorMissingColumn, parse_relation.c:3723
2025-05-25 12:39:57.774 UTC [41] STATEMENT:  
	                INSERT INTO medication_delivery 
	                (medication_id, application_date, delivery_date, amount)
	                VALUES (1, '2025-05-25'::date, '2025-05-25'::date, 10.0)
	                RETURNING id
	            
2025-05-25 12:40:02.616 UTC [1] LOG:  00000: received fast shutdown request
2025-05-25 12:40:02.616 UTC [1] LOCATION:  process_pm_shutdown_request, postmaster.c:2274
2025-05-25 12:40:02.618 UTC [1] LOG:  00000: aborting any active transactions
2025-05-25 12:40:02.618 UTC [1] LOCATION:  process_pm_shutdown_request, postmaster.c:2292
2025-05-25 12:40:02.619 UTC [1] LOG:  00000: background worker "logical replication launcher" (PID 32) exited with exit code 1
2025-05-25 12:40:02.619 UTC [1] LOCATION:  LogChildExit, postmaster.c:3077
2025-05-25 12:40:02.619 UTC [27] LOG:  00000: shutting down
2025-05-25 12:40:02.619 UTC [27] LOCATION:  ShutdownXLOG, xlog.c:6611
2025-05-25 12:40:02.621 UTC [27] LOG:  00000: checkpoint starting: shutdown immediate
2025-05-25 12:40:02.621 UTC [27] LOCATION:  LogCheckpointStart, xlog.c:6661
2025-05-25 12:40:02.649 UTC [27] LOG:  00000: checkpoint complete: wrote 182 buffers (1.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.004 s, sync=0.019 s, total=0.030 s; sync files=99, longest=0.003 s, average=0.001 s; distance=851 kB, estimate=851 kB; lsn=0/365C8E8, redo lsn=0/365C8E8
2025-05-25 12:40:02.649 UTC [27] LOCATION:  LogCheckpointEnd, xlog.c:6750
2025-05-25 12:40:02.653 UTC [1] LOG:  00000: database system is shut down
2025-05-25 12:40:02.653 UTC [1] LOCATION:  UnlinkLockFiles, miscinit.c:1191
2025-05-25 12:40:59.348 UTC [1] LOG:  00000: starting PostgreSQL 17.5 (Debian 17.5-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
2025-05-25 12:40:59.348 UTC [1] LOCATION:  PostmasterMain, postmaster.c:1080
2025-05-25 12:40:59.348 UTC [1] LOG:  00000: listening on IPv4 address "0.0.0.0", port 5432
2025-05-25 12:40:59.348 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:661
2025-05-25 12:40:59.348 UTC [1] LOG:  00000: listening on IPv6 address "::", port 5432
2025-05-25 12:40:59.348 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:661
2025-05-25 12:40:59.351 UTC [1] LOG:  00000: listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2025-05-25 12:40:59.351 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:657
2025-05-25 12:40:59.354 UTC [30] LOG:  00000: database system was shut down at 2025-05-25 12:40:02 UTC
2025-05-25 12:40:59.354 UTC [30] LOCATION:  StartupXLOG, xlog.c:5445
2025-05-25 12:40:59.364 UTC [1] LOG:  00000: database system is ready to accept connections
2025-05-25 12:40:59.364 UTC [1] LOCATION:  process_pm_child_exit, postmaster.c:2484
2025-05-25 12:41:06.911 UTC [42] ERROR:  42703: column p.ammount does not exist at character 580
2025-05-25 12:41:06.911 UTC [42] HINT:  Perhaps you meant to reference the column "p.amount".
2025-05-25 12:41:06.911 UTC [42] QUERY:  UPDATE medicine_order mo
	    SET status = CASE 
	        WHEN m.type = 'finished' THEN 'ready'::order_status
	        ELSE 'producing'::order_status
	    END,
	    production_start_time = CASE
	        WHEN m.type = 'manufactured' THEN CURRENT_TIMESTAMP
	        ELSE NULL
	    END
	    FROM prescription p
	    JOIN medicine m ON p.medicine_id = m.id
	    WHERE mo.prescription_id = p.id
	    AND mo.status = 'waiting for a delivery'::order_status
	    AND (
	        (m.type = 'finished' AND m.id = NEW.medication_id AND 
	         (SELECT current_amount FROM medication WHERE id = m.id) >= p.ammount)
	        OR
	        (m.type = 'manufactured' AND EXISTS (
	            SELECT 1 FROM composition c 
	            WHERE c.medicine_id = m.id AND c.ingredient_id = NEW.medication_id
	        ) AND check_components(p.medicine_id, p.ammount))
	    )
2025-05-25 12:41:06.911 UTC [42] CONTEXT:  PL/pgSQL function process_delivery_update() line 9 at SQL statement
2025-05-25 12:41:06.911 UTC [42] LOCATION:  errorMissingColumn, parse_relation.c:3723
2025-05-25 12:41:06.911 UTC [42] STATEMENT:  
	                INSERT INTO medication_delivery 
	                (medication_id, application_date, delivery_date, amount)
	                VALUES (1, '2025-05-25'::date, '2025-05-25'::date, 10.0)
	                RETURNING id
	            
2025-05-25 12:41:53.411 UTC [1] LOG:  00000: received fast shutdown request
2025-05-25 12:41:53.411 UTC [1] LOCATION:  process_pm_shutdown_request, postmaster.c:2274
2025-05-25 12:41:53.413 UTC [1] LOG:  00000: aborting any active transactions
2025-05-25 12:41:53.413 UTC [1] LOCATION:  process_pm_shutdown_request, postmaster.c:2292
2025-05-25 12:41:53.415 UTC [1] LOG:  00000: background worker "logical replication launcher" (PID 33) exited with exit code 1
2025-05-25 12:41:53.415 UTC [1] LOCATION:  LogChildExit, postmaster.c:3077
2025-05-25 12:41:53.415 UTC [28] LOG:  00000: shutting down
2025-05-25 12:41:53.415 UTC [28] LOCATION:  ShutdownXLOG, xlog.c:6611
2025-05-25 12:41:53.416 UTC [28] LOG:  00000: checkpoint starting: shutdown immediate
2025-05-25 12:41:53.416 UTC [28] LOCATION:  LogCheckpointStart, xlog.c:6661
2025-05-25 12:41:53.439 UTC [28] LOG:  00000: checkpoint complete: wrote 260 buffers (1.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.004 s, sync=0.016 s, total=0.025 s; sync files=109, longest=0.001 s, average=0.001 s; distance=1239 kB, estimate=1239 kB; lsn=0/3792688, redo lsn=0/3792688
2025-05-25 12:41:53.439 UTC [28] LOCATION:  LogCheckpointEnd, xlog.c:6750
2025-05-25 12:41:53.443 UTC [1] LOG:  00000: database system is shut down
2025-05-25 12:41:53.443 UTC [1] LOCATION:  UnlinkLockFiles, miscinit.c:1191
2025-05-25 12:42:00.304 UTC [1] LOG:  00000: starting PostgreSQL 17.5 (Debian 17.5-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
2025-05-25 12:42:00.304 UTC [1] LOCATION:  PostmasterMain, postmaster.c:1080
2025-05-25 12:42:00.304 UTC [1] LOG:  00000: listening on IPv4 address "0.0.0.0", port 5432
2025-05-25 12:42:00.304 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:661
2025-05-25 12:42:00.304 UTC [1] LOG:  00000: listening on IPv6 address "::", port 5432
2025-05-25 12:42:00.304 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:661
2025-05-25 12:42:00.306 UTC [1] LOG:  00000: listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2025-05-25 12:42:00.306 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:657
2025-05-25 12:42:00.310 UTC [30] LOG:  00000: database system was shut down at 2025-05-25 12:41:53 UTC
2025-05-25 12:42:00.310 UTC [30] LOCATION:  StartupXLOG, xlog.c:5445
2025-05-25 12:42:00.313 UTC [1] LOG:  00000: database system is ready to accept connections
2025-05-25 12:42:00.313 UTC [1] LOCATION:  process_pm_child_exit, postmaster.c:2484
2025-05-25 12:42:07.631 UTC [42] ERROR:  42703: column "production_start_time" of relation "medicine_order" does not exist at character 161
2025-05-25 12:42:07.631 UTC [42] QUERY:  UPDATE medicine_order mo
	    SET status = CASE 
	        WHEN m.type = 'finished' THEN 'ready'::order_status
	        ELSE 'producing'::order_status
	    END,
	    production_start_time = CASE
	        WHEN m.type = 'manufactured' THEN CURRENT_TIMESTAMP
	        ELSE NULL
	    END
	    FROM prescription p
	    JOIN medicine m ON p.medicine_id = m.id
	    WHERE mo.prescription_id = p.id
	    AND mo.status = 'waiting for a delivery'::order_status
	    AND (
	        (m.type = 'finished' AND m.id = NEW.medication_id AND 
	         (SELECT current_amount FROM medication WHERE id = m.id) >= p.amount)
	        OR
	        (m.type = 'manufactured' AND EXISTS (
	            SELECT 1 FROM composition c 
	            WHERE c.medicine_id = m.id AND c.ingredient_id = NEW.medication_id
	        ) AND check_components(p.medicine_id, p.amount))
	    )
2025-05-25 12:42:07.631 UTC [42] CONTEXT:  PL/pgSQL function process_delivery_update() line 9 at SQL statement
2025-05-25 12:42:07.631 UTC [42] LOCATION:  transformUpdateTargetList, analyze.c:2528
2025-05-25 12:42:07.631 UTC [42] STATEMENT:  
	                INSERT INTO medication_delivery 
	                (medication_id, application_date, delivery_date, amount)
	                VALUES (1, '2025-05-25'::date, '2025-05-25'::date, 10.0)
	                RETURNING id
	            
2025-05-25 12:47:00.392 UTC [28] LOG:  00000: checkpoint starting: time
2025-05-25 12:47:00.392 UTC [28] LOCATION:  LogCheckpointStart, xlog.c:6661
2025-05-25 12:47:21.931 UTC [28] LOG:  00000: checkpoint complete: wrote 217 buffers (1.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=21.501 s, sync=0.026 s, total=21.540 s; sync files=105, longest=0.005 s, average=0.001 s; distance=1058 kB, estimate=1058 kB; lsn=0/389AF70, redo lsn=0/389AEE0
2025-05-25 12:47:21.931 UTC [28] LOCATION:  LogCheckpointEnd, xlog.c:6750
2025-05-25 12:58:52.411 UTC [1] LOG:  00000: received fast shutdown request
2025-05-25 12:58:52.411 UTC [1] LOCATION:  process_pm_shutdown_request, postmaster.c:2274
2025-05-25 12:58:52.412 UTC [1] LOG:  00000: aborting any active transactions
2025-05-25 12:58:52.412 UTC [1] LOCATION:  process_pm_shutdown_request, postmaster.c:2292
2025-05-25 12:58:52.414 UTC [1] LOG:  00000: background worker "logical replication launcher" (PID 33) exited with exit code 1
2025-05-25 12:58:52.414 UTC [1] LOCATION:  LogChildExit, postmaster.c:3077
2025-05-25 12:58:52.414 UTC [28] LOG:  00000: shutting down
2025-05-25 12:58:52.414 UTC [28] LOCATION:  ShutdownXLOG, xlog.c:6611
2025-05-25 12:58:52.415 UTC [28] LOG:  00000: checkpoint starting: shutdown immediate
2025-05-25 12:58:52.415 UTC [28] LOCATION:  LogCheckpointStart, xlog.c:6661
2025-05-25 12:58:52.419 UTC [28] LOG:  00000: checkpoint complete: wrote 0 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.001 s, sync=0.001 s, total=0.006 s; sync files=0, longest=0.000 s, average=0.000 s; distance=0 kB, estimate=952 kB; lsn=0/389B020, redo lsn=0/389B020
2025-05-25 12:58:52.419 UTC [28] LOCATION:  LogCheckpointEnd, xlog.c:6750
2025-05-25 12:58:52.423 UTC [1] LOG:  00000: database system is shut down
2025-05-25 12:58:52.423 UTC [1] LOCATION:  UnlinkLockFiles, miscinit.c:1191
2025-05-25 12:59:01.397 UTC [1] LOG:  00000: starting PostgreSQL 17.5 (Debian 17.5-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
2025-05-25 12:59:01.397 UTC [1] LOCATION:  PostmasterMain, postmaster.c:1080
2025-05-25 12:59:01.397 UTC [1] LOG:  00000: listening on IPv4 address "0.0.0.0", port 5432
2025-05-25 12:59:01.397 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:661
2025-05-25 12:59:01.397 UTC [1] LOG:  00000: listening on IPv6 address "::", port 5432
2025-05-25 12:59:01.397 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:661
2025-05-25 12:59:01.401 UTC [1] LOG:  00000: listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2025-05-25 12:59:01.401 UTC [1] LOCATION:  ListenServerPort, pqcomm.c:657
2025-05-25 12:59:01.406 UTC [30] LOG:  00000: database system was shut down at 2025-05-25 12:58:52 UTC
2025-05-25 12:59:01.406 UTC [30] LOCATION:  StartupXLOG, xlog.c:5445
2025-05-25 12:59:01.411 UTC [1] LOG:  00000: database system is ready to accept connections
2025-05-25 12:59:01.411 UTC [1] LOCATION:  process_pm_child_exit, postmaster.c:2484
2025-05-25 13:00:16.084 UTC [1] LOG:  00000: received fast shutdown request
2025-05-25 13:00:16.084 UTC [1] LOCATION:  process_pm_shutdown_request, postmaster.c:2274
2025-05-25 13:00:16.086 UTC [1] LOG:  00000: aborting any active transactions
2025-05-25 13:00:16.086 UTC [1] LOCATION:  process_pm_shutdown_request, postmaster.c:2292
2025-05-25 13:00:16.087 UTC [1] LOG:  00000: background worker "logical replication launcher" (PID 33) exited with exit code 1
2025-05-25 13:00:16.087 UTC [1] LOCATION:  LogChildExit, postmaster.c:3077
2025-05-25 13:00:16.087 UTC [28] LOG:  00000: shutting down
2025-05-25 13:00:16.087 UTC [28] LOCATION:  ShutdownXLOG, xlog.c:6611
2025-05-25 13:00:16.088 UTC [28] LOG:  00000: checkpoint starting: shutdown immediate
2025-05-25 13:00:16.088 UTC [28] LOCATION:  LogCheckpointStart, xlog.c:6661
2025-05-25 13:00:16.111 UTC [28] LOG:  00000: checkpoint complete: wrote 212 buffers (1.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.005 s, sync=0.014 s, total=0.024 s; sync files=104, longest=0.001 s, average=0.001 s; distance=1057 kB, estimate=1057 kB; lsn=0/39A3500, redo lsn=0/39A3500
2025-05-25 13:00:16.111 UTC [28] LOCATION:  LogCheckpointEnd, xlog.c:6750
2025-05-25 13:00:16.114 UTC [1] LOG:  00000: database system is shut down
2025-05-25 13:00:16.114 UTC [1] LOCATION:  UnlinkLockFiles, miscinit.c:1191
